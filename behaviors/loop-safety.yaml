bundle:
  name: loop-safety-behavior
  version: 1.0.0
  description: |
    Loop safety behavior providing iteration limits and pattern detection.
    
    Includes:
    - orchestrator-loop-safe: Hard iteration limits with warnings
    - hooks-loop-detector: Repetitive pattern detection
    - loop-diagnostician: Diagnostic agent for stuck sessions
    
    Users can include this behavior for standard loop protection,
    or compose modules directly for custom configuration.

# Orchestrator with iteration limits
session:
  orchestrator:
    module: orchestrator-loop-safe
    source: ./modules/orchestrator-loop-safe
    config:
      max_iterations: 100
      warn_at: [75, 90]

# Pattern detection hook
hooks:
  - module: hooks-loop-detector
    source: ./modules/hooks-loop-detector
    config:
      detection_window: 10
      similarity_threshold: 0.85
      action_on_detect: warn
      apply_to_sub_sessions: false

# Diagnostic agent
agents:
  include:
    - loop-safety:loop-diagnostician

# Awareness pointer
context:
  include:
    - loop-safety:context/loop-safety-awareness.md
